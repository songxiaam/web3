
在 Solidity 中，有三种基本的引用类型：数组、结构体和映射类型。数组是将相同类型的元素集合到一起，形成一种新的数据类型。

结构体则是将不同类型的元素绑定在一起，创建出一种复合类型。结构体在 Solidity 中的应用非常广泛，具体体现在以下几个方面：

1. 数据管理：结构体能够将多种不同类型的数据组合在一起，便于进行统一管理。
2. 函数参数处理：通过结构体，我们可以将多个数据作为一个整体传入函数，无需将其拆解为多个独立参数。
3. 返回值管理：同样地，结构体也可以用来从函数返回多个值，简化数据处理。
4. 增强表达力：结构体的使用增强了 Solidity 的编程表达能力，因为结构体可以与其他结构体、数组或映射类型进行嵌套，从而使得代码结构更加清晰，易于理解。

定义一个结构体
在 Solidity 中定义一个结构体需要使用 `struct` 关键字。这允许你创建一个自定义的复合数据类型，集合不同的数据元素。下面是一个简单的例子，演示如何定义一个名为 `Book` 的结构体，其中包括书名和价格两个元素：

定义结构体类型

```
struct Book {
    string title; _// 书名_
    uint price;   _// 价格_
}
```

## 结构体的声明

在 Solidity 中，声明结构体变量时，与其他引用类型一样，需要指定数据的存储位置。如我们之前在“数据位置”一节中所讨论的，每个引用类型的变量声明都必须明确其数据位置修饰符，除非这是一个状态变量的声明，此时可以省略数据位置修饰符。

声明结构体类型变量

```
Book memory book;
```

根据上面的例子，我们不难总结出声明一个结构体的格式如下：

```
StructName DataLocation varName;
```

其中 `StructName` 是你定义的结构体名称， `DataLocation` 是数据位置。然后 `varName` 是给结构体变量取的任意名字。

## 结构体的初始化

在 Solidity 中，初始化结构体有两种常见方法。其中一种是通过键值对的形式，明确指定每个成员的初始值。这种方式为结构体的每个字段赋予明确的值，确保初始化过程清晰且易于理解。下面是一个示例：

```
Book memory book1 = Book(
    {
        title: "my book title",
        price: 25
    }
);
```

在初始化 Solidity 中的结构体时，确保为每个成员明确赋予初始值是非常重要的。不能省略任何一个成员的初始化，以避免运行时错误或意外的行为。

除了键值对的方法外，还有一种更简洁的初始化方式，即按照结构体定义时成员的顺序直接赋值。这种方法依赖于成员在定义时的排列顺序，每个值将按顺序赋给对应的成员，如下所示：

依据定义结构体时各个成员的顺序一一给定初始化值

```
Book memory book2 = Book("my book title", 25);
```

同样地，你必须为每一个成员赋初始值，不能省略任何一个成员。

## 获取结构体成员

要获取结构体成员我们可以使用 `.` 操作符。如下面例子所示：

获取结构体成员值

```
Book memory book3;
book3.title = "my book title"; _// 给结构体成员赋值_
book3.price = 25; _// 给结构体成员赋值_

console.log("title: %s", book3.title); _// 获取结构体成员值_
```

## 结构体可以和数组，映射类型互相嵌套

通过使用结构体，数据管理在 Solidity 中变得更加方便和高效。结构体不仅可以独立使用，还可以与数组和映射类型进行嵌套（映射类型将在下一节中详细介绍）。这种嵌套能力显著增强了 Solidity 的编程表达力和灵活性。如下所示：

结构体数组

```
Book[] public lib; _// Book数组，状态变量_
function addNewBook(Book memory book) public {
    lib.push(book);
}
```

结构体在 Solidity 中的应用非常灵活，其中还可以包含数组作为其成员。这为构建更复杂和动态的数据结构提供了可能。

以书籍为例，一本书可能有多个合著者。为了能够有效地存储这些信息，我们可以在书籍的结构体中添加一个数组来记录所有作者的名字。例如：

```
struct Book {
    string title; _// 书名_
    uint price;   _// 价格_
    string[] author; _// 作者_
}
```
