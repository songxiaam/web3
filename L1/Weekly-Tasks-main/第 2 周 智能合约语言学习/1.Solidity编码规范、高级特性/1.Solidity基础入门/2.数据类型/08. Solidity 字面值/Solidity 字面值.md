
字面值（literal）是指在程序中无需变量保存，直接表示为具体数字或字符串值的方式。Solidity 支持多种字面值类型，包括：

- **地址字面值**
- **有理数和整数字面值**
- **字符串字面值**
- **Unicode 字面值**

我们接下来对它们逐一进行介绍。

## 地址字面值（_address literal_)

地址字面值是一个长度为 42 字节的十六进制字符串。形如 `0x690B9A9E9aa1C9dB991C7721a92d351Db4FaC990` 你可以直接将地址字面值赋值给地址类型变量。

```
address addr = 0x690B9A9E9aa1C9dB991C7721a92d351Db4FaC990;
```

## 有理数和整数字面值

Solidity 支持多种有理数和整数的字面值表示方式，包括：

- **十进制整数:** 如 123
- **十进制小数：** 如.1、1.2 等；但小数点后必须至少跟一个数字
- **十六进制整数：** 如 0xff
- **科学记数法：** 如 2e10、-2e10、2e-10、2.5e1

有理数和整数字面值的表示方式

```
uint256 d1 = 123;     _// d1=123_
uint256 d2 = .1+1.9;  _// d2=2_
uint256 h = 0xff;     _// h=255_
int256 s1 = 2e10;     _// s1=20000000000_
int256 s2 = -2e10;    _// s2=-20000000000_
```

在 Solidity 中不支持 8 进制字面值，因此不应使用 8 进制表示方式。有时你会看到一些合约中的整数字面值带有下划线 _，它们仅用作视觉辅助，不会影响数值。例如，1000_000 表示 100 万。

### 有理数和整数字面值可以是任意精度

值得一提的是，所有的有理数和整数字面值在 Solidity 中可以是任意精度，不会有精度损失的问题。例如，在下面的例子中，变量 p 的值为 1。尽管计算过程中间值 (2**800 + 1) 超过了 uint256 可以表示的范围，但整个表达式的最终结果仍然是 1。同样地，举例说明，.5*8 的结果为 4。

有理数和整数字面值可以是任意精度

```
uint256 p = (2**800 + 1) - 2**800;
```

然而，要注意一个规则：一旦字面值和非字面值进行了运算，字面值就会被尝试转换成非字面值的类型。例如，在下面的表达式中，2.5 与变量 a 进行了运算，因此编译器会尝试将 2.5 转换成 uint128 类型。然而，由于类型不匹配，编译器会报错。

有理数和整数字面值参与运算时会被转换成非字面值类型（1）

```
uint128 a = 1;
uint128 b = 2.5 + a + 0.5; _//编译报错_
```

然而，如果你将代码改成下面这个样子，你会得到 b=4 的结果。这是因为两个字面值 2.5 和 0.5 先进行了运算，得到 3 ，然后将 3 转换成 uint128 类型，再与变量 a 进行运算，最终得到 4。

有理数和整数字面值参与运算时会被转换成非字面值类型（2）

```
uint128 a = 1;
uint128 b = 2.5 + 0.5 + a;
```

再将变量 a 的位置调换一下，编译器也会报错。这是因为先进行了变量 a 和 2.5 的运算，因此需要将 2.5 转换成 uint128 类型。由于类型不匹配，因此会报错。

有理数和整数字面值参与运算时会被转换成非字面值类型（3）

```
uint128 a = 1;
uint128 b = a + 2.5 + 0.5 ; _//编译报错_
```

## 字符串字面值

### 字符串字面值定义

字符串字面值用单引号 `’’` 或者双引号 `””` 定义。如下所示：

字符串字面值的表示方式

```
string memory s1 = "This is a string"; _// 双引号_
string memory s2 = 'This is a string'; _// 单引号_
```

与 C 语言不同，Solidity 的字符串字面值后面不会跟着\0。举例来说，"foo"是三个字节，而不是四个字节。

### 隐式类型转换

字符串字面值可以隐式地转换成 bytes1, bytes2, …, bytes32 还有 string 类型。因此，你可以直接对它们进行赋值。如下所示：

字符串字面值隐式类型转换

```
bytes1 b1 = "b";
bytes2 b2 = "b2";
bytes3 b3 = "b3";
bytes32 b32 = "b32";
string memory str = "string";
```

### 转义字符

除此之外，字符串字面值还支持下列转义字符：

- `\<newline>` (字符串字面值可以横跨多行)
- `\\` (反斜杠)
- `\'` (单引号)
- `\"` (双引号)
- `\n` (新行)
- `\r` (回车)
- `\t` (tab)
- `\xNN` (十六进制表示字符)
- `\uNNNN` (unicode 表示字符)

这些转义字符可以和其他字符混合使用，例如 `”\’hello world\’”` 。

## Unicode 字面值

Unicode 字面值和字符串字面值类似，只需要在前面加上 unicode 关键字，你就可以在里面包含任何的 UTF-8 字符。Unicode 字面值是由反斜杠 \ 和四位十六进制数拼成的。例如，\u0041 表示大写字母 A。同时，你也可以使用 Emoji：

使用 UNICODE 字面值

```
string memory a = unicode"Hello \u0041 😃";
```

## 小结

1. 字面值（literal）是指在程序中无需变量保存的值，可以直接表示为数字或字符串。Solidity 支持多种字面值类型，包括地址字面值，有理数和整数字面值，字符串字面值，以及 Unicode 字面值。
2. 地址字面值是一个长度为 42 字节的十六进制字符串，可以直接赋值给地址类型。
3. 有理数和整数字面值有多种表示方式，包括十进制整数、十进制小数、十六进制整数以及科学记数法。Solidity 不支持 8 进制字面值。
4. 在 Solidity 中，可以在整数字面值中使用下划线_来增强可读性。例如，1_000_000 表示 100 万。
5. 字符串字面值是由双引号 " 或单引号 ' 括起来的字符串。可以使用转义字符 \ 来表示一些特殊字符。
6. Unicode 字面值是由反斜杠 \ 和四位十六进制数拼成的。例如，\u0041 表示大写字母 A。
